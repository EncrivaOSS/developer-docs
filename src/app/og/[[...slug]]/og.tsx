import { ImageResponse } from 'next/og';
import type { ReactElement, ReactNode } from 'react';
import type { ImageResponseOptions } from 'next/dist/compiled/@vercel/og/types';

interface GenerateProps {
	title: ReactNode;
	description?: ReactNode;
	primaryTextColor?: string;
}

export function generateOGImage(
	options: GenerateProps & ImageResponseOptions,
): ImageResponse {
	const { title, description, primaryTextColor, ...rest } = options;

	return new ImageResponse(
		generate({
			title,
			description,
			primaryTextColor,
		}),
		{
			width: 1200,
			height: 630,
			...rest,
		},
	);
}

export function generate({
	primaryTextColor = 'rgb(150, 255, 155)',
	...props
}: GenerateProps): ReactElement {
	return (
		<div
			style={{
				display: 'flex',
				flexDirection: 'column',
				width: '100%',
				height: '100%',
				color: 'white',
				backgroundColor: 'rgb(10,10,10)',
			}}
		>
			<Abstract style={{ position: 'absolute', top: 0, left: 0, opacity: 0.5, width: '100%', height: '100%' }} />
			<div
				style={{
					display: 'flex',
					flexDirection: 'column',
					width: '100%',
					height: '100%',
					padding: '4rem',
				}}
			>
				<p
					style={{
						fontWeight: 600,
						fontSize: '76px',
					}}
				>
					{props.title}
				</p>
				{props.description && (
					<p
						style={{
							fontSize: '48px',
							color: 'rgba(240,240,240,0.7)',
						}}
					>
						{(props.description as string)?.length > 80 ? (props.description as string).slice(0, 80) + "..." : props.description}
					</p>
				)}
				<div
					style={{
						display: 'flex',
						flexDirection: 'row',
						alignItems: 'center',
						gap: '24px',
						marginTop: 'auto',
						color: primaryTextColor,
					}}
				>
					<p
						style={{
							fontSize: '46px',
							fontWeight: 600,
						}}
					>
						Encriva{" "}<span style={{ marginLeft: '12px', color: 'rgb(150, 255, 155)' }}>for Developers</span>
					</p>
				</div>
			</div>
		</div>
	);
}

function Abstract({ style }: { style: React.CSSProperties }) {
	return (
		<svg
			xmlns="http://www.w3.org/2000/svg"
			width="992"
			height="388"
			fill="none"
			viewBox="0 0 992 388"
			style={style}
		>
			<path
				stroke="#fff"
				strokeOpacity="0.04"
				d="M1095.53 282.284c37.71 46.762 98.67 102.394 56.04 147.774-44.16 47.001-171.294 36.124-253.21 62.116-63.932 20.287-99.646 69.493-172.631 73.008-72.946 3.512-120.221-46.492-191.702-55.463-109.087-13.692-267.045 43.405-327.93-9.758-59.459-51.919 108.799-106.414 124.73-167.672 13.274-51.038-101.582-110.683-42.182-149.736 62.009-40.767 187.294 8.617 278.733-5.785 74.886-11.794 116.079-69.392 193.784-68.637 77.591.755 131.954 42.583 189.128 72.362 57.85 30.131 112.56 61.271 145.24 101.791Z"
				clipRule="evenodd"
			></path>
			<path
				stroke="#fff"
				strokeOpacity="0.04"
				d="M1082.35 283.497c34.81 47.48 92.31 104.285 46.91 148.794-47.01 46.097-173.404 32.708-256.868 57.063-65.141 19.008-103.86 67.476-177.016 69.543-73.117 2.066-117.289-48.844-188.174-59.226-108.179-15.844-269.552 38.09-327.131-16.247-56.23-53.065 115.277-104.194 134.966-165.1 16.403-50.743-94.715-112.626-32.949-150.479 64.477-39.514 186.65 12.321 278.919-.261 75.565-10.304 120.275-67.051 197.886-64.757 77.498 2.291 129.255 45.17 184.563 76.063 55.963 31.259 108.724 63.464 138.894 104.607Z"
				clipRule="evenodd"
				opacity="0.959"
			></path>
			<path
				stroke="#fff"
				strokeOpacity="0.04"
				d="M1069.1 284.449c31.87 48.141 85.84 106.05 37.74 149.633-49.83 45.138-175.317 29.254-260.228 51.94-66.27 17.707-107.945 65.379-181.184 65.995-73.2.617-114.214-51.137-184.418-62.917-107.138-17.977-271.73 32.728-325.932-22.716-52.933-54.146 121.614-101.848 145.036-162.326 19.514-50.388-87.731-114.434-23.675-151.04 66.868-38.214 185.778 16.01 278.765 5.264 76.153-8.802 124.325-64.629 201.748-60.799 77.309 3.825 126.398 47.703 179.773 79.673 54.007 32.348 104.755 65.578 132.375 107.293Z"
				clipRule="evenodd"
				opacity="0.917"
			></path>
			<path
				stroke="#fff"
				strokeOpacity="0.04"
				d="M1055.8 285.139c28.9 48.743 79.27 107.685 28.51 150.289-52.56 44.123-177.002 25.764-263.257 46.755-67.319 16.382-111.9 63.2-185.132 62.366-73.193-.834-111-53.369-180.436-66.532-105.968-20.088-273.577 27.326-324.337-29.158-49.571-55.162 127.803-99.377 154.929-159.354 22.601-49.971-80.64-116.102-14.372-151.417 69.177-36.866 184.68 19.68 278.271 10.782 76.648-7.288 128.224-62.127 205.364-56.766 77.027 5.354 123.388 50.177 174.765 83.185 51.984 33.398 100.655 67.613 125.695 109.85Z"
				clipRule="evenodd"
				opacity="0.876"
			></path>
			<path
				stroke="#fff"
				strokeOpacity="0.04"
				d="M1042.47 285.565c25.88 49.285 72.59 109.189 19.25 150.762-55.25 43.055-178.481 22.242-265.974 41.512-68.285 15.039-115.718 60.945-188.855 58.661-73.097-2.283-107.65-55.534-176.235-70.065-104.668-22.174-275.091 21.891-322.346-35.564-46.149-56.11 133.836-96.785 164.635-156.189 25.659-49.492-73.452-117.628-5.053-151.609C339.294 87.6 451.25 146.399 545.331 139.36c77.049-5.765 131.966-59.55 208.729-52.663 76.651 6.875 120.228 52.59 169.543 86.595 49.899 34.407 96.437 69.566 118.867 112.273Z"
				clipRule="evenodd"
				opacity="0.835"
			></path>
			<path
				stroke="#fff"
				strokeOpacity="0.04"
				d="M1029.12 285.726c22.83 49.768 65.83 110.561 9.97 151.051-57.866 41.936-179.744 18.694-268.369 36.219-69.168 13.678-119.395 58.617-192.347 54.885-72.912-3.729-104.17-57.632-171.819-73.512-103.24-24.235-276.269 16.429-319.962-41.927-42.67-56.99 139.706-94.076 174.138-152.833 28.688-48.954-66.173-119.012 4.274-151.617 73.54-34.038 181.812 26.943 276.268 21.772 77.357-4.236 135.548-56.9 211.841-48.497 76.181 8.39 116.92 54.939 164.114 89.9 47.753 35.375 92.102 71.434 111.892 114.559Z"
				clipRule="evenodd"
				opacity="0.794"
			></path>
			<path
				stroke="#fff"
				strokeOpacity="0.04"
				d="M1015.76 285.623c19.76 50.19 59 111.798.68 151.157-60.408 40.763-180.782 15.122-270.43 30.881-69.968 12.3-122.928 56.216-195.605 51.042-72.639-5.171-100.563-59.661-167.194-76.871-101.688-26.264-277.112 10.947-317.19-48.239-39.14-57.8 145.406-91.251 183.431-149.29 31.681-48.356-58.815-120.25 13.594-151.44 75.589-32.56 180.045 30.528 274.762 27.23 77.57-2.701 138.964-54.18 214.694-44.271 75.619 9.893 113.47 57.221 158.486 93.096 45.548 36.299 87.654 73.214 104.772 116.705Z"
				clipRule="evenodd"
				opacity="0.752"
			></path>
			<path
				stroke="#fff"
				strokeOpacity="0.04"
				d="M1002.42 285.255c16.66 50.551 52.09 112.899-8.617 151.079-62.875 39.542-181.599 11.532-272.162 25.506-70.681 10.906-126.31 53.747-198.625 47.137-72.276-6.607-96.832-61.617-162.365-80.136-100.01-28.263-277.615 5.452-314.03-54.492-35.561-58.54 150.929-88.315 192.5-145.566 34.635-47.7-51.384-121.342 22.899-151.08 77.544-31.042 178.057 34.076 272.919 32.657 77.69-1.163 142.211-51.394 217.286-39.992 74.965 11.385 109.882 59.434 152.665 96.178 43.288 37.179 83.098 74.906 97.53 118.709Z"
				clipRule="evenodd"
				opacity="0.711"
			></path>
			<path
				stroke="#fff"
				strokeOpacity="0.04"
				d="M989.117 284.624c13.543 50.85 45.113 113.861-17.907 150.815-65.268 38.273-182.198 7.929-273.565 20.101-71.309 9.499-129.538 51.212-201.402 43.173-71.826-8.034-92.984-63.496-157.338-83.302-98.212-30.226-277.782-.051-310.488-60.679-31.94-59.209 156.268-85.272 201.334-141.665 37.547-46.984-43.891-122.285 32.175-150.533 79.406-29.488 175.854 37.582 270.745 38.042 77.714.376 145.285-48.546 219.613-35.664 74.219 12.863 106.16 61.574 146.657 99.143 40.976 38.014 78.442 76.507 90.176 120.569Z"
				clipRule="evenodd"
				opacity="0.67"
			></path>
			<path
				stroke="#fff"
				strokeOpacity="0.04"
				d="M975.856 283.729c10.406 51.087 38.084 114.686-27.17 150.369-67.582 36.957-182.575 4.315-274.634 14.67-71.85 8.081-132.609 48.616-203.935 39.158-71.288-9.452-89.023-65.299-152.12-86.368-96.293-32.153-277.61-5.552-306.567-66.791-28.28-59.806 161.417-82.126 209.923-137.591 40.413-46.212-36.345-123.08 41.412-149.805 81.172-27.897 173.436 41.042 268.241 43.381 77.643 1.916 148.182-45.638 221.672-31.292 73.383 14.325 102.31 63.639 140.471 101.988 38.614 38.802 73.69 78.013 82.707 122.281Z"
				clipRule="evenodd"
				opacity="0.629"
			></path>
			<path
				stroke="#fff"
				strokeOpacity="0.04"
				d="M962.658 282.572c7.258 51.262 31.008 115.37-36.4 149.739-69.814 35.596-182.729.697-275.369 9.222-72.303 6.653-135.517 45.959-206.219 35.095-70.663-10.858-84.953-67.023-146.716-89.328-94.257-34.041-277.098-11.048-302.273-72.823-24.584-60.329 166.369-78.878 218.256-133.349 43.231-45.384-28.754-123.726 50.599-148.893 82.838-26.273 170.806 44.452 265.41 48.667 77.478 3.453 150.898-42.676 223.461-26.883 72.457 15.77 98.334 65.627 134.114 104.708 36.204 39.544 68.847 79.426 75.137 123.845Z"
				clipRule="evenodd"
				opacity="0.588"
			></path>
			<path
				stroke="#fff"
				strokeOpacity="0.04"
				d="M949.539 281.155c4.101 51.374 23.895 115.914-45.586 148.927-71.96 34.191-182.66-2.924-275.768 3.761-72.668 5.218-138.261 43.248-208.251 30.99-69.952-12.251-80.78-68.665-141.134-92.18-92.106-35.887-276.25-16.529-297.61-78.765-20.86-60.78 171.117-75.535 226.323-128.946 45.995-44.499-21.128-124.219 59.724-147.8C351.64-7.474 435.205 64.95 529.492 71.037c77.219 4.985 153.431-39.661 224.979-22.44 71.443 17.195 94.238 67.534 127.593 107.3 33.75 40.237 63.921 80.741 67.475 125.258Z"
				clipRule="evenodd"
				opacity="0.546"
			></path>
			<path
				stroke="#fff"
				strokeOpacity="0.04"
				d="M936.515 279.478c.94 51.425 16.753 116.317-54.716 147.934-74.019 32.745-182.369-6.54-275.831-1.703-72.945 3.775-140.836 40.483-210.03 26.846-69.156-13.629-76.508-70.223-135.379-94.919-89.843-37.69-275.066-21.991-292.586-84.612-17.11-61.156 175.658-72.1 234.115-124.384 48.703-43.561-13.477-124.562 68.776-146.527 85.865-22.93 164.926 51.106 258.782 59.056 76.864 6.511 155.776-36.598 226.221-17.971 70.342 18.6 90.028 69.36 120.917 109.763 31.255 40.88 58.917 81.957 59.731 126.517Z"
				clipRule="evenodd"
				opacity="0.505"
			></path>
			<path
				stroke="#fff"
				strokeOpacity="0.04"
				d="M923.603 277.545c-2.223 51.412 9.59 116.577-63.78 146.759-75.987 31.26-181.856-10.147-275.559-7.164-73.132 2.327-143.239 37.668-211.552 22.669-68.277-14.991-72.144-71.695-129.46-97.543-87.471-39.445-273.546-27.425-287.204-90.355-13.339-61.457 179.984-68.577 241.62-119.671 51.353-42.57-5.808-124.754 77.746-145.076C362.636-34.05 437.096 41.505 530.406 51.31c76.417 8.03 157.931-33.49 227.188-13.48 69.156 19.983 85.708 71.102 114.094 112.091 28.722 41.475 53.841 83.075 51.915 127.624Z"
				clipRule="evenodd"
				opacity="0.464"
			></path>
			<path
				stroke="#fff"
				strokeOpacity="0.04"
				d="M910.817 275.357c-5.383 51.336 2.415 116.696-72.765 145.407-77.864 29.735-181.122-13.744-274.951-12.619-73.231.878-145.469 34.809-212.818 18.466-67.313-16.334-67.69-73.081-123.382-100.047-84.992-41.155-271.693-32.827-281.473-95.989-9.552-61.684 184.092-64.97 248.832-114.813 53.939-41.527 1.867-124.792 86.619-143.447 88.474-19.474 158.243 57.51 250.892 69.157 75.878 9.538 159.895-30.342 227.879-8.971 67.885 21.34 81.284 72.755 107.132 114.282 26.154 42.018 48.7 84.09 44.035 128.574Z"
				clipRule="evenodd"
				opacity="0.422"
			></path>
			<path
				stroke="#fff"
				strokeOpacity="0.04"
				d="M898.174 272.917c-8.537 51.199-4.763 116.673-81.663 143.877-79.645 28.175-180.166-17.322-274.007-18.056-73.241-.574-147.521 31.906-213.824 14.239-66.267-17.657-63.155-74.377-117.155-102.43-82.409-42.813-269.509-38.188-275.399-101.506-5.752-61.835 187.975-61.284 255.741-109.814 56.46-40.433 9.54-124.68 95.388-141.644 89.618-17.71 154.61 60.61 246.486 74.084 75.245 11.035 161.664-27.157 228.292-4.453 66.531 22.672 76.76 74.322 100.039 116.335 23.554 42.51 43.499 85.004 36.102 129.368Z"
				clipRule="evenodd"
				opacity="0.381"
			></path>
			<path
				stroke="#fff"
				strokeOpacity="0.04"
				d="M885.688 270.228c-11.68 50.999-11.934 116.508-90.461 142.172-81.328 26.58-178.991-20.88-272.73-23.473-73.16-2.023-149.392 28.965-214.569 9.996-65.141-18.959-58.543-75.583-110.784-104.688-79.727-44.419-266.997-43.503-268.99-106.898-1.946-61.912 191.63-57.524 262.339-104.683 58.912-39.29 17.2-124.414 104.04-139.668 90.652-15.924 150.788 63.635 241.78 78.921 74.52 12.52 163.235-23.938 228.427.072 65.096 23.975 72.142 75.796 92.824 118.245 20.926 42.951 38.245 85.813 28.124 130.004Z"
				clipRule="evenodd"
				opacity="0.34"
			></path>
			<path
				stroke="#fff"
				strokeOpacity="0.04"
				d="M873.375 267.294c-14.809 50.736-19.091 116.2-99.148 140.293-82.914 24.953-177.598-24.412-271.12-28.86-72.992-3.471-151.083 25.989-215.053 5.74-63.936-20.238-53.86-76.696-104.28-106.819-76.946-45.971-264.159-48.764-262.252-112.161 1.862-61.912 195.05-53.693 268.616-99.422 61.292-38.1 24.841-123.998 112.565-137.523 91.576-14.119 146.784 66.583 236.78 83.662 73.705 13.987 164.608-20.69 228.283 4.596 63.583 25.25 67.438 77.179 85.497 120.012 18.272 43.339 32.945 86.518 20.112 130.482Z"
				clipRule="evenodd"
				opacity="0.299"
			></path>
			<path
				stroke="#fff"
				strokeOpacity="0.04"
				d="M861.25 264.117c-17.92 50.412-26.225 115.752-107.715 138.245-84.397 23.295-175.988-27.916-269.18-34.213-72.733-4.915-152.589 22.98-215.275 1.477-62.652-21.492-49.111-77.716-97.647-108.82-74.073-47.466-261-53.966-255.195-117.286 5.668-61.838 198.233-49.797 274.566-94.042 63.597-36.862 32.451-123.43 120.953-135.21 92.389-12.296 142.6 69.45 231.491 88.302 72.8 15.438 165.78-17.418 227.862 9.114 61.991 26.494 62.65 78.468 78.064 121.632 15.596 43.675 27.604 87.118 12.076 130.801Z"
				clipRule="evenodd"
				opacity="0.258"
			></path>
			<path
				stroke="#fff"
				strokeOpacity="0.04"
				d="M849.328 260.702c-21.009 50.026-33.327 115.162-116.15 136.027-85.779 21.61-174.165-31.384-266.913-39.523-72.387-6.352-153.909 19.944-215.234-2.788-61.293-22.72-44.302-78.642-90.897-110.687-71.108-48.905-257.521-59.103-247.827-122.27 9.468-61.688 201.175-45.84 280.182-88.546 65.826-35.58 40.022-122.712 129.195-132.731 93.088-10.46 138.242 72.231 225.92 92.832C619.41 9.886 714.353-21.108 774.766 6.638c60.324 27.705 57.787 79.66 70.537 123.104 12.9 43.957 22.23 87.612 4.025 130.96Z"
				clipRule="evenodd"
				opacity="0.216"
			></path>
			<path
				stroke="#fff"
				strokeOpacity="0.04"
				d="M837.624 257.053c-24.073 49.58-40.389 114.432-124.445 133.644-87.055 19.898-172.129-34.815-264.32-44.786-71.952-7.782-155.042 16.883-214.932-7.049-59.858-23.92-39.438-79.471-84.034-112.42-68.058-50.284-253.73-64.168-240.157-127.104 13.255-61.463 203.87-41.828 285.456-82.943C263.166-17.86 242.735-105.45 332.47-113.697c93.675-8.608 133.716 74.926 220.074 97.25C623.268 1.838 720.06-27.258 778.73 1.668c58.583 28.883 52.853 80.757 62.923 124.426 10.19 44.186 16.83 87.999-4.029 130.96Z"
				clipRule="evenodd"
				opacity="0.175"
			></path>
			<path
				stroke="#fff"
				strokeOpacity="0.04"
				d="M826.15 253.175c-27.107 49.073-47.401 113.562-132.587 131.097-88.226 18.162-169.883-38.202-261.405-49.993-71.429-9.203-155.985 13.802-214.367-11.303-58.351-25.09-34.528-80.203-77.07-114.015-64.924-51.601-249.63-69.154-232.195-131.783C-74.447 16.015 114.845 39.413 198.91-.061c70.039-32.887 55.007-120.829 145.194-127.293 94.147-6.749 129.027 77.528 213.96 101.55C627.62-6.133 726.142-33.293 782.997-3.223c56.772 30.026 47.855 81.754 55.234 125.596 7.466 44.361 11.408 88.279-12.081 130.801Z"
				clipRule="evenodd"
				opacity="0.134"
			></path>
			<path
				stroke="#fff"
				strokeOpacity="0.04"
				d="M814.922 249.072c-30.108 48.505-54.355 112.553-140.568 128.391-89.289 16.403-167.43-41.544-258.171-55.141-70.82-10.611-156.739 10.704-213.542-15.541-56.772-26.231-29.574-80.839-70.011-115.473-61.712-52.855-245.225-74.056-223.95-136.301 20.778-60.789 208.515-33.656 294.956-71.44 72.018-31.48 62.403-119.666 152.933-124.341 94.505-4.879 124.181 80.037 207.585 105.726 68.305 21.039 168.437-4.154 223.408 27.024 54.891 31.132 42.799 82.652 47.477 126.614 4.734 44.481 5.972 88.451-20.117 130.482Z"
				clipRule="evenodd"
				opacity="0.092"
			></path>
			<path
				stroke="#fff"
				strokeOpacity="0.04"
				d="M803.954 244.749c-33.073 47.879-61.244 111.408-148.378 125.528-90.243 14.625-164.773-44.835-254.623-60.22-70.124-12.008-157.302 7.593-212.456-19.761-55.124-27.34-24.585-81.376-62.868-116.789C67.205 119.461-114.893 94.638-89.802 32.852-65.3-27.488 120.655 3.347 209.366-32.702c73.911-30.035 69.725-118.357 160.487-121.236C464.6-156.942 489.036-71.49 570.81-44.165c66.969 22.379 168.59-.815 221.61 31.432 52.943 32.2 37.69 83.45 39.662 127.478 1.996 44.548.53 88.515-28.128 130.004Z"
				clipRule="evenodd"
				opacity="0.051"
			></path>
			<path
				stroke="#fff"
				strokeOpacity="0.04"
				d="M793.258 240.213C757.261 287.408 725.2 350.34 637.251 362.726c-91.087 12.828-161.916-48.071-250.764-65.227-69.344-13.389-157.674 4.473-211.112-23.957-53.41-28.415-19.566-81.813-55.648-117.963-55.065-55.17-235.525-83.584-206.65-144.836 28.198-59.818 212.143-25.318 303.017-59.589 75.712-28.552 76.96-116.904 167.844-117.983 94.874-1.126 114.041 84.758 194.084 113.687 65.553 23.691 168.538 2.524 219.543 35.802 50.93 33.23 32.535 84.145 31.798 128.185-.745 44.561-4.914 88.472-36.105 129.368Z"
				clipRule="evenodd"
				opacity="0.01"
			></path>
			<circle
				cx="774"
				cy="109"
				r="1"
				fill="#fff"
				transform="rotate(90 774 109)"
			></circle>
			<circle
				cx="887"
				cy="242"
				r="1"
				fill="#fff"
				transform="rotate(90 887 242)"
			></circle>
			<circle
				cx="240"
				cy="45"
				r="1"
				fill="#fff"
				transform="rotate(90 240 45)"
			></circle>
			<circle
				cx="106"
				cy="144"
				r="1"
				fill="#fff"
				transform="rotate(90 106 144)"
			></circle>
			<circle
				cx="190"
				cy="212"
				r="1"
				fill="#fff"
				transform="rotate(90 190 212)"
			></circle>
			<circle
				cx="172"
				cy="379"
				r="1"
				fill="#fff"
				transform="rotate(90 172 379)"
			></circle>
		</svg>
	)
}